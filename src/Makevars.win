COMPILED_BY ?= gcc-4.6.3
PKG_CPPFLAGS= -Ilegacy -I../windows/libv8-3.15.10/include
PKG_CXXFLAGS=-DV8_DISABLE_DEPRECATIONS
PKG_LIBS= -L../windows/libv8-3.15.10/lib${subst gcc,,${COMPILED_BY}}${R_ARCH} \
	-lv8_base -lpreparser_lib -lv8_snapshot -lws2_32 -lwinmm

OBJECTS = legacy/V8.o legacy/v8_typed_array.o legacy/RcppExports.o

all: clean winlibs

clean:
	rm -f $(SHLIB) $(OBJECTS)

winlibs:
	"${R_HOME}/bin${R_ARCH_BIN}/Rscript.exe" --vanilla "../tools/winlibs.R"

.PHONY: all winlibs clean
